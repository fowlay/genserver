

Refactoring: Do not pass an object around. All state is in instance variables of the callback class.


Refactoring: Create public inner classes named Args in the callback modules. In that way the init function can deal with named and typed arguments.


Refactoring - major: Use just a single "transport" callback class on each side, handling all listening and sending. Presumably a single socket on each side is enough.
